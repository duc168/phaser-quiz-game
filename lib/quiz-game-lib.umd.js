var ue=Object.defineProperty,de=Object.defineProperties;var le=Object.getOwnPropertyDescriptors;var R=Object.getOwnPropertySymbols;var Te=Object.prototype.hasOwnProperty,Ee=Object.prototype.propertyIsEnumerable;var v=(o,r,c)=>r in o?ue(o,r,{enumerable:!0,configurable:!0,writable:!0,value:c}):o[r]=c,N=(o,r)=>{for(var c in r||(r={}))Te.call(r,c)&&v(o,c,r[c]);if(R)for(var c of R(r))Ee.call(r,c)&&v(o,c,r[c]);return o},f=(o,r)=>de(o,le(r));var s=(o,r,c)=>(v(o,typeof r!="symbol"?r+"":r,c),c);(function(o,r){typeof exports=="object"&&typeof module!="undefined"?module.exports=r(require("react"),require("phaser")):typeof define=="function"&&define.amd?define(["react","phaser"],r):(o=typeof globalThis!="undefined"?globalThis:o||self,o.QuizGameLib=r(o.React,o.phaser))})(this,function(o,r){"use strict";function c(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var A=c(o),u={DEFAULT_FONT:"CentraNo2",AUDIO:{TICK:"tick",TIMEOUT:"timeout"}},d={CLICK_CHOICE_EVENT:"click-choice-event",ADD_NEW_QUESTION_EVENT:"add-new-question-event",NEXT_QUESTION_EVENT:"next-question-event",END_ALL_QUESTIONS_EVENT:"end-all-questions-event"};const S=()=>{let t=0,e=0;if(typeof window.innerWidth!="undefined")t=window.innerWidth,e=window.innerHeight;else if(typeof document.documentElement!="undefined"&&typeof document.documentElement.clientWidth!="undefined"&&document.documentElement.clientWidth!==0)t=document.documentElement.clientWidth,e=document.documentElement.clientHeight;else{const i=document.getElementsByTagName("body")[0];t=i.clientWidth,e=i.clientHeight}return{width:t,height:e}},L=(t,e)=>{const i={align:"center",padding:{x:t/10,y:e/20},wordWrap:{width:t/4,useAdvancedWrap:!0},fixedWidth:t/2.3,fontSize:t/600+"rem"},n={x:0,y:e/2-e/4},a={fontSize:t/300+"rem",align:"center",wordWrap:{width:t},fixedWidth:t},h={x:t/32,y:e/2+e/16},T={x:t/2+t/32,y:e/2+e/16},E={x:t/32,y:e/2+e/4},se={x:t/2+t/32,y:e/2+e/4},ne={x:0,y:0},re={fontSize:t/500+"rem",padding:{x:t/64,y:e/32},fixedWidth:t/12},oe={x:t/2-t/16,y:e/2-e/16},ae={fontSize:t/300+"rem"},ce={x:t-t/10,y:0},he={fontSize:t/500+"rem",padding:{x:t/64,y:e/32},fixedWidth:t/12,fontFamily:u.DEFAULT_FONT};return{QUESTION:{STYLE:a,POINT:n},CHOICE:{STYLE:i,POINTS:{A:h,B:T,C:E,D:se}},TIMER:{STYLE:re,POINT:ne},START_BUTTON:{STYLE:ae,POINT:oe},NUMERIC_ORDER:{STYLE:he,POINT:ce}}},P=()=>{const{width:t,height:e}=S();return L(t,e)},Q=t=>"/"+t;class b{constructor(){s(this,"events");this.events={}}addEvent(e,i){this.events[e]=i}removeEvent(e){delete this.events[e]}emit(e,i){!this.events[e]||this.events[e](i)}}const V=new b;var l={getViewportDimensions:S,getResponsiveData:P,getFullPath:Q,getCustomEventEmitter:()=>V};class q{constructor(e){s(this,"scene");s(this,"answer");this.scene=e}setAnswer(e){this.answer=e}getAnswer(){return this.answer}}class D{constructor(e){s(this,"SETTING",l.getResponsiveData());s(this,"choices",[]);s(this,"scene");this.scene=e}addHoverEffect(e){e&&(e.on("pointerover",()=>{e.setAlpha(.5)}),e.on("pointerout",()=>{e.setAlpha(1)}))}addOnClickHandler(e){e&&e.on("pointerdown",()=>{this.scene.game.events.emit(d.CLICK_CHOICE_EVENT,e)})}getRectangleStyle(){return f(N({},this.SETTING.CHOICE.STYLE),{backgroundColor:"#ffffff",color:"#000000",align:"center",fontFamily:u.DEFAULT_FONT})}init(e){this.choices.length===4&&this.remove(),e.length===4&&(this.choices.push(this.scene.add.text(this.SETTING.CHOICE.POINTS.A.x,this.SETTING.CHOICE.POINTS.A.y,e[0],this.getRectangleStyle())),this.choices.push(this.scene.add.text(this.SETTING.CHOICE.POINTS.B.x,this.SETTING.CHOICE.POINTS.B.y,e[1],this.getRectangleStyle())),this.choices.push(this.scene.add.text(this.SETTING.CHOICE.POINTS.C.x,this.SETTING.CHOICE.POINTS.C.y,e[2],this.getRectangleStyle())),this.choices.push(this.scene.add.text(this.SETTING.CHOICE.POINTS.D.x,this.SETTING.CHOICE.POINTS.D.y,e[3],this.getRectangleStyle())),this.choices.forEach(i=>i.setInteractive({cursor:"pointer"})),this.choices.forEach(i=>this.addHoverEffect(i)),this.choices.forEach(i=>this.addOnClickHandler(i)))}remove(){this.choices.forEach(e=>{e.removeFromDisplayList(),e.removeFromUpdateList(),e.removedFromScene(),e.removeAllListeners(),e.removeInteractive()}),this.choices=[]}}class F{constructor(e){s(this,"SETTING",l.getResponsiveData());s(this,"scene");s(this,"text");this.scene=e}hideText(){var e;(e=this.text)==null||e.setVisible(!1)}showText(){var e;(e=this.text)==null||e.setVisible(!0)}setText(e){var i;(i=this.text)==null||i.setText(e)}init(){this.text=this.scene.add.text(this.SETTING.NUMERIC_ORDER.POINT.x,this.SETTING.NUMERIC_ORDER.POINT.y,"1/1",this.SETTING.NUMERIC_ORDER.STYLE),this.hideText()}}class z{constructor(e){s(this,"SETTING",l.getResponsiveData());s(this,"scene");s(this,"question");this.scene=e}init(e){if(this.question){this.question.setText(e);return}this.question=this.scene.add.text(this.SETTING.QUESTION.POINT.x,this.SETTING.QUESTION.POINT.y,e,f(N({},this.SETTING.QUESTION.STYLE),{fontFamily:u.DEFAULT_FONT}))}remove(){var e,i,n;(e=this.question)==null||e.removeFromDisplayList(),(i=this.question)==null||i.removeFromUpdateList(),(n=this.question)==null||n.removedFromScene(),this.question=void 0}}class G{constructor(e){s(this,"SETTING",l.getResponsiveData());s(this,"scene");s(this,"text");this.scene=e}hideText(){var e,i;(e=this.text)==null||e.setVisible(!1),(i=this.text)==null||i.disableInteractive()}showText(){var e,i;(e=this.text)==null||e.setVisible(!0),(i=this.text)==null||i.setInteractive()}init(e){this.text=this.scene.add.text(this.SETTING.START_BUTTON.POINT.x,this.SETTING.START_BUTTON.POINT.y,"Start",f(N({},this.SETTING.START_BUTTON.STYLE),{fontFamily:u.DEFAULT_FONT})),!!this.text&&(this.text.setInteractive({cursor:"pointer"}),this.text.on("pointerover",()=>{var i;(i=this.text)==null||i.setAlpha(.5)}),this.text.on("pointerout",()=>{var i;(i=this.text)==null||i.setAlpha(1)}),this.text.on("pointerdown",()=>{e()}))}}class k{constructor(e){s(this,"SETTING",l.getResponsiveData());s(this,"scene");s(this,"text");s(this,"timerValue",0);s(this,"timerDefaultValue",0);s(this,"timerIntervalId");s(this,"audioTick");s(this,"audioTimeout");this.scene=e}showText(){var e;(e=this.text)==null||e.setVisible(!0)}hideText(){var e;(e=this.text)==null||e.setVisible(!1)}initAudio(){try{this.audioTick=this.scene.sound.add(u.AUDIO.TICK),this.audioTimeout=this.scene.sound.add(u.AUDIO.TIMEOUT)}catch(e){console.log("Error initAudio ",e)}}reset(){clearInterval(this.timerIntervalId),this.timerValue=this.timerDefaultValue,this.setText(this.timerValue+"")}init(e=0){this.initAudio(),this.timerDefaultValue=e,this.timerValue=e,this.text=this.scene.add.text(this.SETTING.TIMER.POINT.x,this.SETTING.TIMER.POINT.y,e+"",f(N({},this.SETTING.TIMER.STYLE),{fontFamily:u.DEFAULT_FONT,align:"center"})),this.hideText()}setText(e){var i;(i=this.text)==null||i.setText(e)}setInterval(e,i){this.timerIntervalId=setInterval(()=>{var n,a;!this.text||(this.timerValue--,this.setText(this.timerValue+""),this.timerValue===0?((n=this.audioTimeout)==null||n.play(),clearInterval(this.timerIntervalId),i()):((a=this.audioTick)==null||a.play(),e()))},1e3)}}class B extends r.Scene{constructor(e,i){super(e);s(this,"SETTING",l.getResponsiveData());s(this,"question");s(this,"choices");s(this,"answer");s(this,"timer");s(this,"startButton");s(this,"numericOrder");s(this,"currentQuiz");this.question=new z(this),this.choices=new D(this),this.timer=new k(this),this.startButton=new G(this),this.numericOrder=new F(this),this.answer=new q(this)}preload(){this.load.audio(u.AUDIO.TICK,[l.getFullPath("audio/mixkit-game-ball-tap-2073.wav")]),this.load.audio(u.AUDIO.TIMEOUT,[l.getFullPath("audio/mixkit-video-game-treasure-2066.wav")])}addNewQuiz(e){this.currentQuiz=e}addQuiz(){if(!this.currentQuiz)return;const{question:e,choices:i,order:n,total:a}=this.currentQuiz;this.question.init(e),this.choices.init(i),this.numericOrder.setText(`${n}/${a}`),this.timer.reset(),this.startButton.hideText(),this.numericOrder.showText(),this.timer.showText(),this.timer.setInterval(()=>{},()=>{this.game.events.emit(d.NEXT_QUESTION_EVENT)})}removeQuiz(){this.question.remove(),this.choices.remove(),this.timer.hideText(),this.numericOrder.hideText()}create(){this.timer.init(5),this.startButton.init(()=>{this.game.events.emit(d.NEXT_QUESTION_EVENT)}),this.numericOrder.init(),this.game.events.on(d.ADD_NEW_QUESTION_EVENT,e=>{this.addNewQuiz(e),this.addQuiz()}),this.game.events.on(d.END_ALL_QUESTIONS_EVENT,()=>{this.startButton.showText(),this.removeQuiz()})}init(e){}}var j={},_={exports:{}},m={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var x=Object.getOwnPropertySymbols,M=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;function K(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function X(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;var n=Object.getOwnPropertyNames(e).map(function(h){return e[h]});if(n.join("")!=="0123456789")return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(h){a[h]=h}),Object.keys(Object.assign({},a)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}X();/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $=A.default,p=60103;if(m.Fragment=60107,typeof Symbol=="function"&&Symbol.for){var g=Symbol.for;p=g("react.element"),m.Fragment=g("react.fragment")}var J=$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Z=Object.prototype.hasOwnProperty,W={key:!0,ref:!0,__self:!0,__source:!0};function y(t,e,i){var n,a={},h=null,T=null;i!==void 0&&(h=""+i),e.key!==void 0&&(h=""+e.key),e.ref!==void 0&&(T=e.ref);for(n in e)Z.call(e,n)&&!W.hasOwnProperty(n)&&(a[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)a[n]===void 0&&(a[n]=e[n]);return{$$typeof:p,type:t,key:h,ref:T,props:a,_owner:J.current}}m.jsx=y,m.jsxs=y,_.exports=m;const w=_.exports.jsx,O="quiz-game",H=()=>{var e;const t=document.getElementById(O);if(t){const i=t.getElementsByTagName("canvas");i.length>0&&((e=i.item(0))==null||e.remove())}},ee=t=>{const{width:e,height:i}=l.getViewportDimensions(),n=new B("quiz-game",t);return new r.Game({height:i-5,width:e,parent:O,backgroundColor:"#123456",scene:n,physics:{default:"arcade"}})},I=[{order:1,total:8,question:"How old are you?",choices:["100","20","30","Idk"],answer:3},{order:2,total:8,question:"Where does water come from?",choices:["Sea","Sky","Human","God"],answer:3},{order:3,total:8,question:"How old is earth?",choices:["111","6969","57575","Idk"],answer:3},{order:4,total:8,question:"How old is your father?",choices:["10","20","30","Idk"],answer:3},{order:5,total:8,question:"How old is your brother?",choices:["3","4","5","Idk"],answer:3},{order:6,total:8,question:"How old is your mother?",choices:["10","20","33","Idk"],answer:3},{order:7,total:8,question:"How old is your sister?",choices:["15","25","35","Idk"],answer:3},{order:8,total:8,question:"How old is your best friend?",choices:["20","100","31","Idk"],answer:3}];function*C(){for(let t=0;t<I.length;t++)yield I[t]}let U=C();const te=(t,e)=>{const{value:i,done:n}=U.next();n?(e(),U=C()):t.events.emit(d.ADD_NEW_QUESTION_EVENT,i)};var ie={QuizGame:()=>(o.useEffect(()=>{H();const t=ee(I);t.events.on(d.CLICK_CHOICE_EVENT,e=>{console.log("click on ",e.text)}),t.events.on(d.NEXT_QUESTION_EVENT,()=>{te(t,()=>{t.events.emit(d.END_ALL_QUESTIONS_EVENT)})})},[]),w("div",{className:j.container,children:w("div",{id:O})}))};return ie});
